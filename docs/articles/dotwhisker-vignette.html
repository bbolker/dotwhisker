<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>dotwhisker: Dot-and-Whisker Plots of Regression Results • dotwhisker</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="dotwhisker: Dot-and-Whisker Plots of Regression Results">
<meta property="og:description" content="dotwhisker">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">dotwhisker</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.7.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/dotwhisker-vignette.html">dotwhisker: Dot-and-Whisker Plots of Regression Results</a>
    </li>
    <li>
      <a href="../articles/kl2007_examples.html">dotwhisker: Remaking the Examples from Kastellec and Leoni (2007)</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/fsolt/dotwhisker/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="dotwhisker-vignette_files/header-attrs-2.10/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>dotwhisker: Dot-and-Whisker Plots of Regression Results</h1>
                        <h4 data-toc-skip class="author">Frederick Solt and Yue Hu</h4>
            
            <h4 data-toc-skip class="date">2021-08-30</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/fsolt/dotwhisker/blob/master/vignettes/dotwhisker-vignette.Rmd"><code>vignettes/dotwhisker-vignette.Rmd</code></a></small>
      <div class="hidden name"><code>dotwhisker-vignette.Rmd</code></div>

    </div>

    
    
<p>Graphs have long been known to be a more compact and effective means of conveying the results of regression models than tables <span class="citation">(Gelman, Pasarica, and Dodhia 2002; Kastellec and Leoni 2007)</span>, but many researchers continue to list these results in tables. The reason, <span class="citation">Kastellec and Leoni (2007)</span> surmised, is “simply put, it takes much greater effort to produce a quality graph than a table.” The <code>dotwhisker</code> package provides a quick and easy way to create highly customizable dot-and-whisker plots for presenting and comparing the output of regression models. It can be used to plot estimates of coefficients or other quantities of interest (e.g., predicted probabilities) within a single model or across different models: the estimates are presented as dots and their confidence intervals as whiskers <span class="citation">(see Kastellec and Leoni 2007, 765–67)</span>.</p>
<p>Users can easily customize the content of their plots: presenting multiple models or results for a subset of variables is easy. Moreover, by outputting <code>ggplot</code> objects <span class="citation">(Wickham 2009)</span>, <code>dotwhisker</code> allows users to further modify the format of their plots in nearly infinite ways.</p>
<p>This vignette illustrates basic use of the package’s mainstay function, <code>dwplot</code>, for creating dot-and-whisker plots from model objects; more advanced uses of <code>dwplot</code> that employ tidy data frames as input; and, finally, some useful variations of dot-and-whisker plots that are easily made using other functions in the <code>dotwhisker</code> package.</p>
<div id="basic-use-plotting-results-from-one-or-more-regression-models" class="section level1">
<h1 class="hasAnchor">
<a href="#basic-use-plotting-results-from-one-or-more-regression-models" class="anchor"></a>Basic Use: Plotting Results from One or More Regression Models</h1>
<p>Generating dot-and-whisker plots from model objects generated by the most commonly used regression functions is straightforward. To make a basic dot-and-whisker plot of any single model object of a class supported by <a href="https://github.com/easystats/parameters"><code>parameters::parameters</code></a>, simply pass it to <code>dwplot</code>. For these examples, we’ll use the <code>mtcars</code> dataset extracted from the 1974 volume of the US magazine, <em>Motor Trend</em>.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#Package preload</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">dotwhisker</span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span>

<span class="co"># run a regression compatible with tidy</span>
<span class="va">m1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="va">mpg</span> <span class="op">~</span> <span class="va">wt</span> <span class="op">+</span> <span class="va">cyl</span> <span class="op">+</span> <span class="va">disp</span> <span class="op">+</span> <span class="va">gear</span>, data <span class="op">=</span> <span class="va">mtcars</span><span class="op">)</span>

<span class="co"># draw a dot-and-whisker plot</span>
<span class="fu"><a href="../reference/dwplot.html">dwplot</a></span><span class="op">(</span><span class="va">m1</span><span class="op">)</span></code></pre></div>
<p><img src="dotwhisker-vignette_files/figure-html/basic-1.png" width="660"></p>
<p>By default, the whiskers span the 95% confidence interval. To change the width of the confidence interval, specify a <code>ci</code> argument to pass to <code><a href="https://easystats.github.io/parameters/reference/model_parameters.html">parameters::parameters()</a></code>:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/dwplot.html">dwplot</a></span><span class="op">(</span><span class="va">m1</span>, ci <span class="op">=</span> <span class="fl">.60</span><span class="op">)</span> <span class="op">+</span>   <span class="co"># using 60% of confidence intervals</span>
    <span class="fu">theme</span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span> </code></pre></div>
<p><img src="dotwhisker-vignette_files/figure-html/ci-1.png" width="660"></p>
<p>Plotting the results of more than one regression model is just as easy. Just pass the model objects to <code>dwplot</code> as a list. The <code>dodge_size</code> argument is used to adjust the space between the estimates of one variable when multiple models are presented in a single plot. Its default value of .4 will usually be fine, but, depending on the dimensions of the desired plot, more pleasing results may be achieved by setting <code>dodge_size</code> to lower values when the plotted results include a relatively small number of predictors or to higher values when many models appear on the same plot.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">m2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/update.html">update</a></span><span class="op">(</span><span class="va">m1</span>, <span class="va">.</span> <span class="op">~</span> <span class="va">.</span> <span class="op">+</span> <span class="va">hp</span><span class="op">)</span> <span class="co"># add another predictor</span>
<span class="va">m3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/update.html">update</a></span><span class="op">(</span><span class="va">m2</span>, <span class="va">.</span> <span class="op">~</span> <span class="va">.</span> <span class="op">+</span> <span class="va">am</span><span class="op">)</span> <span class="co"># and another </span>

<span class="fu"><a href="../reference/dwplot.html">dwplot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="va">m1</span>, <span class="va">m2</span>, <span class="va">m3</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><img src="dotwhisker-vignette_files/figure-html/multipleModels-1.png" width="660"></p>
<p>Model intercepts are rarely theoretically interesting <span class="citation">(see Kastellec and Leoni 2007, 765)</span>, so they are excluded by <code>dwplot</code> by default. They are easy to include if desired, however, by setting the <code>show_intercept</code> argument to true.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/dwplot.html">dwplot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="va">m1</span>, <span class="va">m2</span>, <span class="va">m3</span><span class="op">)</span>, show_intercept <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p><img src="dotwhisker-vignette_files/figure-html/intercept-1.png" width="660"></p>
<p>Users are free to customize the order of the models and variables to present with the arguments <code>model_order</code> and <code>vars_order</code>. Moreover, the output of <code>dwplot</code> is a <code>ggplot</code> object. Add or change any <code>ggplot</code> layers after calling <code>dwplot</code> to achieve the desired presentation. Users can provide a named character vector to <code>relabel_predictors</code>, a <code>dotwhisker</code> function, conveniently renames the predictors. Note that both <code>vars_order</code> and <code>relabel_predictors</code> changes the presenting order of variables. When both are used, the later overwrites the former.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/dwplot.html">dwplot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="va">m1</span>, <span class="va">m2</span>, <span class="va">m3</span><span class="op">)</span>,
       vline <span class="op">=</span> <span class="fu">geom_vline</span><span class="op">(</span>
           xintercept <span class="op">=</span> <span class="fl">0</span>,
           colour <span class="op">=</span> <span class="st">"grey60"</span>,
           linetype <span class="op">=</span> <span class="fl">2</span>
       <span class="op">)</span>,
       vars_order <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"am"</span>, <span class="st">"cyl"</span>, <span class="st">"disp"</span>, <span class="st">"gear"</span>, <span class="st">"hp"</span>, <span class="st">"wt"</span><span class="op">)</span>,
       model_order <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Model 2"</span>, <span class="st">"Model 1"</span>, <span class="st">"Model 3"</span><span class="op">)</span>
       <span class="op">)</span> <span class="op">%&gt;%</span> <span class="co"># plot line at zero _behind_coefs</span>
    <span class="fu"><a href="../reference/relabel_predictors.html">relabel_predictors</a></span><span class="op">(</span>
        <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span>
            am <span class="op">=</span> <span class="st">"Manual"</span>,
            cyl <span class="op">=</span> <span class="st">"Cylinders"</span>,
            disp <span class="op">=</span> <span class="st">"Displacement"</span>,
            wt <span class="op">=</span> <span class="st">"Weight"</span>,
            gear <span class="op">=</span> <span class="st">"Gears"</span>,
            hp <span class="op">=</span> <span class="st">"Horsepower"</span>
        <span class="op">)</span>
    <span class="op">)</span> <span class="op">+</span>
    <span class="fu">theme_bw</span><span class="op">(</span>base_size <span class="op">=</span> <span class="fl">4</span><span class="op">)</span> <span class="op">+</span> 
    <span class="co"># Setting `base_size` for fit the theme</span>
    <span class="co"># No need to set `base_size` in most usage</span>
    <span class="fu">xlab</span><span class="op">(</span><span class="st">"Coefficient Estimate"</span><span class="op">)</span> <span class="op">+</span> <span class="fu">ylab</span><span class="op">(</span><span class="st">""</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">geom_vline</span><span class="op">(</span>xintercept <span class="op">=</span> <span class="fl">0</span>,
               colour <span class="op">=</span> <span class="st">"grey60"</span>,
               linetype <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">ggtitle</span><span class="op">(</span><span class="st">"Predicting Gas Mileage"</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">theme</span><span class="op">(</span>
        plot.title <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>face <span class="op">=</span> <span class="st">"bold"</span><span class="op">)</span>,
        legend.position <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.007</span>, <span class="fl">0.01</span><span class="op">)</span>,
        legend.justification <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>,
        legend.background <span class="op">=</span> <span class="fu">element_rect</span><span class="op">(</span>colour <span class="op">=</span> <span class="st">"grey80"</span><span class="op">)</span>,
        legend.title <span class="op">=</span> <span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span>
    <span class="op">)</span> </code></pre></div>
<p><img src="dotwhisker-vignette_files/figure-html/ggplot-1.png" width="660"></p>
<p>There are many other packages (e.g., <code>coefplot</code>) that have the ability to draw dot-and-whisker plots of at least a single set of regression results taking model objects as input. While this is very convenient, it also comes with some severe limitations. First, many less common model objects are not supported. Second, rescaling coefficients, reordering them, or just plotting a subset of results is typically impossible. And third, quantities of interest beyond coefficient estimates cannot be plotted. The <code>dotwhisker</code> package avoids all of these limitations by optionally taking as its input a tidy data frame of estimates drawn from a model object rather than the model object itself.</p>
</div>
<div id="advanced-use-decoration-and-modification" class="section level1">
<h1 class="hasAnchor">
<a href="#advanced-use-decoration-and-modification" class="anchor"></a>Advanced Use: Decoration and Modification</h1>
<div id="plotting-results-stored-in-a-tidy-data-frame" class="section level2">
<h2 class="hasAnchor">
<a href="#plotting-results-stored-in-a-tidy-data-frame" class="anchor"></a>Plotting Results Stored in a Tidy Data Frame</h2>
<p>In addition to model objects, the input for <code>dwplot</code> may be a tidy data frame that includes three columns: <code>term</code>, that is, the variable name; <code>estimate</code>, the regression coefficients or other quantity of interest; and <code>std.error</code>, the standard errors associated with these estimates. In place of <code>std.error</code> one may substitute <code>conf.low</code>, the lower bounds of the confidence intervals of the estimates, and <code>conf.high</code>, the corresponding upper bounds. As noted above, “tidy data” <span class="citation">(Robinson 2015)</span> refers such a data frame of estimates for many common classes of model objects (indeed, <code>dwplot</code> was written to expect a data.frame with the columns <code>term</code>, <code>estimate</code>, and <code>std.error</code>). When more than one model’s results are to be plotted, an additional column <code>model</code> that identifies the two models must be added to the data frame (alternate names for this last column may be specified by using the <code>model_name</code> argument).</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># regression compatible with tidy</span>
<span class="va">m1_df</span> <span class="op">&lt;-</span> <span class="fu">broom</span><span class="fu">::</span><span class="fu"><a href="https://generics.r-lib.org/reference/tidy.html">tidy</a></span><span class="op">(</span><span class="va">m1</span><span class="op">)</span> <span class="co"># create data.frame of regression results</span>
<span class="va">m1_df</span> <span class="co"># a tidy data.frame available for dwplot</span></code></pre></div>
<pre><code>## # A tibble: 5 x 5
##   term        estimate std.error statistic       p.value
##   &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;         &lt;dbl&gt;
## 1 (Intercept) 43.5        4.86       8.96  0.00000000142
## 2 wt          -3.79       1.08      -3.51  0.00161      
## 3 cyl         -1.78       0.614     -2.91  0.00722      
## 4 disp         0.00694    0.0120     0.578 0.568        
## 5 gear        -0.490      0.790     -0.621 0.540</code></pre>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/dwplot.html">dwplot</a></span><span class="op">(</span><span class="va">m1_df</span><span class="op">)</span> <span class="co">#same as dwplot(m1)</span></code></pre></div>
<p><img src="dotwhisker-vignette_files/figure-html/tidyData-1.png" width="660"></p>
<p>Using <code>tidy</code> can be helpful when one wishes to omit certain model estimates from the plot. To illustrate, we drop the intercept (although this is in fact done by <code>dwplot</code> automatically by default):</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">m1_df</span> <span class="op">&lt;-</span>
    <span class="fu">broom</span><span class="fu">::</span><span class="fu"><a href="https://generics.r-lib.org/reference/tidy.html">tidy</a></span><span class="op">(</span><span class="va">m1</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">term</span> <span class="op">!=</span> <span class="st">"(Intercept)"</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>model <span class="op">=</span> <span class="st">"Model 1"</span><span class="op">)</span>
<span class="va">m2_df</span> <span class="op">&lt;-</span>
    <span class="fu">broom</span><span class="fu">::</span><span class="fu"><a href="https://generics.r-lib.org/reference/tidy.html">tidy</a></span><span class="op">(</span><span class="va">m2</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">term</span> <span class="op">!=</span> <span class="st">"(Intercept)"</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>model <span class="op">=</span> <span class="st">"Model 2"</span><span class="op">)</span>

<span class="va">two_models</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span><span class="op">(</span><span class="va">m1_df</span>, <span class="va">m2_df</span><span class="op">)</span>

<span class="fu"><a href="../reference/dwplot.html">dwplot</a></span><span class="op">(</span><span class="va">two_models</span><span class="op">)</span></code></pre></div>
<p><img src="dotwhisker-vignette_files/figure-html/tidy-1.png" width="660"></p>
<p>You can also filter by regular expressions. This can be helpful, for instance, if a model contains a factor with many levels (e.g., a dummy variable for each country) which you might not want to include in your plot.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Transform cyl to factor variable in the data</span>
<span class="va">m_factor</span> <span class="op">&lt;-</span>
    <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="va">mpg</span> <span class="op">~</span> <span class="va">wt</span> <span class="op">+</span> <span class="va">cyl</span> <span class="op">+</span> <span class="va">disp</span> <span class="op">+</span> <span class="va">gear</span>, data <span class="op">=</span> <span class="va">mtcars</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>cyl <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">cyl</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>

<span class="co"># Remove all model estimates that start with cyl*</span>
<span class="va">m_factor_df</span> <span class="op">&lt;-</span> <span class="fu">broom</span><span class="fu">::</span><span class="fu"><a href="https://generics.r-lib.org/reference/tidy.html">tidy</a></span><span class="op">(</span><span class="va">m_factor</span><span class="op">)</span> <span class="op">%&gt;%</span>
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html">grepl</a></span><span class="op">(</span><span class="st">'cyl*'</span>, <span class="va">term</span><span class="op">)</span><span class="op">)</span>

<span class="fu"><a href="../reference/dwplot.html">dwplot</a></span><span class="op">(</span><span class="va">m_factor_df</span><span class="op">)</span></code></pre></div>
<p><img src="dotwhisker-vignette_files/figure-html/regularExpression-1.png" width="660"></p>
<p>It can also be convenient to build a tidy data frame of regression results directly, that is, without first creating model objects:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Run model on subsets of data, save results as tidy df, make a model variable, and relabel predictors</span>
<span class="va">by_trans</span> <span class="op">&lt;-</span> <span class="va">mtcars</span> <span class="op">%&gt;%</span>
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">am</span><span class="op">)</span> <span class="op">%&gt;%</span>                                         <span class="co"># group data by trans</span>
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/do.html">do</a></span><span class="op">(</span><span class="fu">broom</span><span class="fu">::</span><span class="fu"><a href="https://generics.r-lib.org/reference/tidy.html">tidy</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="va">mpg</span> <span class="op">~</span> <span class="va">wt</span> <span class="op">+</span> <span class="va">cyl</span> <span class="op">+</span> <span class="va">disp</span> <span class="op">+</span> <span class="va">gear</span>, data <span class="op">=</span> <span class="va">.</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="co"># run model on each grp</span>
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename</a></span><span class="op">(</span>model <span class="op">=</span> <span class="va">am</span><span class="op">)</span> <span class="op">%&gt;%</span>                                     <span class="co"># make model variable</span>
    <span class="fu"><a href="../reference/relabel_predictors.html">relabel_predictors</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span>
        wt <span class="op">=</span> <span class="st">"Weight"</span>,
        <span class="co"># relabel predictors</span>
        cyl <span class="op">=</span> <span class="st">"Cylinders"</span>,
        disp <span class="op">=</span> <span class="st">"Displacement"</span>,
        gear <span class="op">=</span> <span class="st">"Gear"</span>
    <span class="op">)</span><span class="op">)</span>

<span class="va">by_trans</span></code></pre></div>
<pre><code>## # A tibble: 10 x 6
## # Groups:   model [2]
##    model term         estimate std.error statistic  p.value
##    &lt;dbl&gt; &lt;fct&gt;           &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
##  1     0 Weight       -2.81       1.27      -2.22  0.0434  
##  2     0 Cylinders    -1.30       0.599     -2.17  0.0473  
##  3     0 Displacement  0.00692    0.0129     0.534 0.601   
##  4     0 Gear          1.26       1.81       0.696 0.498   
##  5     0 (Intercept)  30.7        7.41       4.15  0.000986
##  6     1 Weight       -7.53       2.77      -2.71  0.0265  
##  7     1 Cylinders     0.198      1.70       0.116 0.910   
##  8     1 Displacement -0.0146     0.0315    -0.464 0.655   
##  9     1 Gear         -1.08       2.14      -0.506 0.627   
## 10     1 (Intercept)  48.4       11.1        4.34  0.00247</code></pre>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/dwplot.html">dwplot</a></span><span class="op">(</span><span class="va">by_trans</span>,
       vline <span class="op">=</span> <span class="fu">geom_vline</span><span class="op">(</span>
           xintercept <span class="op">=</span> <span class="fl">0</span>,
           colour <span class="op">=</span> <span class="st">"grey60"</span>,
           linetype <span class="op">=</span> <span class="fl">2</span>
       <span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="co"># plot line at zero _behind_ coefs</span>
    <span class="fu">theme_bw</span><span class="op">(</span>base_size <span class="op">=</span> <span class="fl">4</span><span class="op">)</span> <span class="op">+</span> <span class="fu">xlab</span><span class="op">(</span><span class="st">"Coefficient Estimate"</span><span class="op">)</span> <span class="op">+</span> <span class="fu">ylab</span><span class="op">(</span><span class="st">""</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">ggtitle</span><span class="op">(</span><span class="st">"Predicting Gas Mileage by Transmission Type"</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">theme</span><span class="op">(</span>
        plot.title <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>face <span class="op">=</span> <span class="st">"bold"</span><span class="op">)</span>,
        legend.position <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.007</span>, <span class="fl">0.01</span><span class="op">)</span>,
        legend.justification <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>,
        legend.background <span class="op">=</span> <span class="fu">element_rect</span><span class="op">(</span>colour <span class="op">=</span> <span class="st">"grey80"</span><span class="op">)</span>,
        legend.title.align <span class="op">=</span> <span class="fl">.5</span>
    <span class="op">)</span> <span class="op">+</span>
    <span class="fu">scale_colour_grey</span><span class="op">(</span>
        start <span class="op">=</span> <span class="fl">.3</span>,
        end <span class="op">=</span> <span class="fl">.7</span>,
        name <span class="op">=</span> <span class="st">"Transmission"</span>,
        breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span>,
        labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Automatic"</span>, <span class="st">"Manual"</span><span class="op">)</span>
    <span class="op">)</span></code></pre></div>
<p><img src="dotwhisker-vignette_files/figure-html/relabel-1.png" width="660"></p>
<p>Also note in the above example the additional manner of using the <code>relabel_predictors</code> function: in addition to being used on the <code>ggplot</code> object created by <code>dwplot</code> before further customization, it may also be used on a tidy data frame before it is passed to <code>dwplot</code>.</p>
<p>Additionally, one can change the shape of the point estimate instead of using different colors. This can be useful, for example, when a plot needs to be printed in black and white. Here we also vary the linetype of the whiskers.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/dwplot.html">dwplot</a></span><span class="op">(</span>
    <span class="va">by_trans</span>,
    vline <span class="op">=</span> <span class="fu">geom_vline</span><span class="op">(</span>
        xintercept <span class="op">=</span> <span class="fl">0</span>,
        colour <span class="op">=</span> <span class="st">"grey60"</span>,
        linetype <span class="op">=</span> <span class="fl">2</span>
    <span class="op">)</span>,
    <span class="co"># plot line at zero _behind_ coefs</span>
    dot_args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>shape <span class="op">=</span> <span class="va">model</span><span class="op">)</span><span class="op">)</span>,
    whisker_args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>linetype <span class="op">=</span> <span class="va">model</span><span class="op">)</span><span class="op">)</span>
<span class="op">)</span> <span class="op">+</span>
    <span class="fu">theme_bw</span><span class="op">(</span>base_size <span class="op">=</span> <span class="fl">4</span><span class="op">)</span> <span class="op">+</span> <span class="fu">xlab</span><span class="op">(</span><span class="st">"Coefficient Estimate"</span><span class="op">)</span> <span class="op">+</span> <span class="fu">ylab</span><span class="op">(</span><span class="st">""</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">ggtitle</span><span class="op">(</span><span class="st">"Predicting Gas Mileage by Transmission Type"</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">theme</span><span class="op">(</span>
        plot.title <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>face <span class="op">=</span> <span class="st">"bold"</span><span class="op">)</span>,
        legend.position <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.007</span>, <span class="fl">0.01</span><span class="op">)</span>,
        legend.justification <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>,
        legend.background <span class="op">=</span> <span class="fu">element_rect</span><span class="op">(</span>colour <span class="op">=</span> <span class="st">"grey80"</span><span class="op">)</span>,
        legend.title.align <span class="op">=</span> <span class="fl">.5</span>
    <span class="op">)</span> <span class="op">+</span>
    <span class="fu">scale_colour_grey</span><span class="op">(</span>
        start <span class="op">=</span> <span class="fl">.1</span>,
        end <span class="op">=</span> <span class="fl">.1</span>,
        <span class="co"># if start and end same value, use same colour for all models</span>
        name <span class="op">=</span> <span class="st">"Model"</span>,
        breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span>,
        labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Automatic"</span>, <span class="st">"Manual"</span><span class="op">)</span>
    <span class="op">)</span> <span class="op">+</span>
    <span class="fu">scale_shape_discrete</span><span class="op">(</span>
        name <span class="op">=</span> <span class="st">"Model"</span>,
        breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span>,
        labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Automatic"</span>, <span class="st">"Manual"</span><span class="op">)</span>
    <span class="op">)</span> <span class="op">+</span>
    <span class="fu">guides</span><span class="op">(</span>
        shape <span class="op">=</span> <span class="fu">guide_legend</span><span class="op">(</span><span class="st">"Model"</span><span class="op">)</span>, 
        colour <span class="op">=</span> <span class="fu">guide_legend</span><span class="op">(</span><span class="st">"Model"</span><span class="op">)</span>
    <span class="op">)</span> <span class="co"># Combine the legends for shape and color</span></code></pre></div>
<p><img src="dotwhisker-vignette_files/figure-html/custom-1.png" width="660"></p>
<p>It is also easy to plot classes of model objects that are not supported by <code>tidy</code> or <code><a href="https://easystats.github.io/parameters/reference/model_parameters.html">parameters::parameters</a></code>: one simply extracts the results from the model object and builds the data frame to pass to <code>dwplot</code> oneself. Many functions generate results that can be extracted by <code><a href="https://rdrr.io/r/stats/coef.html">coef()</a></code>.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># the ordinal regression model is not supported by tidy</span>
<span class="va">m4</span> <span class="op">&lt;-</span> <span class="fu">ordinal</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/ordinal/man/clm.html">clm</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">gear</span><span class="op">)</span> <span class="op">~</span> <span class="va">wt</span> <span class="op">+</span> <span class="va">cyl</span> <span class="op">+</span> <span class="va">disp</span>, data <span class="op">=</span> <span class="va">mtcars</span><span class="op">)</span>
<span class="va">m4_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/coef.html">coef</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">m4</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
    <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span>
    <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/rownames.html">rownames_to_column</a></span><span class="op">(</span><span class="st">"term"</span><span class="op">)</span> <span class="op">%&gt;%</span>
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename</a></span><span class="op">(</span>estimate <span class="op">=</span> <span class="va">Estimate</span>, std.error <span class="op">=</span> <span class="va">Std..Error</span><span class="op">)</span>
<span class="va">m4_df</span></code></pre></div>
<pre><code>##   term    estimate  std.error    z.value  Pr...z..
## 1  3|4 -4.03517968 2.45869171 -1.6411898 0.1007580
## 2  4|5 -1.37662018 2.28622404 -0.6021370 0.5470829
## 3   wt -1.13452561 0.98498075 -1.1518252 0.2493929
## 4  cyl  0.41701081 0.60620009  0.6879095 0.4915098
## 5 disp -0.01343896 0.01188167 -1.1310664 0.2580271</code></pre>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/dwplot.html">dwplot</a></span><span class="op">(</span><span class="va">m4_df</span><span class="op">)</span></code></pre></div>
<p><img src="dotwhisker-vignette_files/figure-html/clm-1.png" width="660"></p>
<p>Working with a tidy data frame, it is similarly straightforward to plot just a subset of results or to rescale or reorder coefficients. One often desirable manipulation is to standardize the scales of variables. <span class="citation">Gelman (2008)</span>, for example, suggests rescaling ordinal and continuous predictors by two standard deviations to facilitate comparison with dichotomous predictors. Although this can of course be done before model estimation, it can be more convenient to simply rescale the coefficients afterwards; the <code>by_2sd</code> function, which takes as arguments a data frame of estimates along with the original data frame upon which the model was based, automates this calculation.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Customize the input data frame</span>
<span class="va">m1_df_mod</span> <span class="op">&lt;-</span>
    <span class="va">m1_df</span> <span class="op">%&gt;%</span>                 <span class="co"># the original tidy data.frame</span>
    <span class="fu"><a href="../reference/by_2sd.html">by_2sd</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">)</span> <span class="op">%&gt;%</span>                 <span class="co"># rescale the coefficients</span>
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">term</span><span class="op">)</span>                      <span class="co"># alphabetize the variables</span>

<span class="va">m1_df_mod</span>  <span class="co"># rescaled, with variables reordered alphabetically</span></code></pre></div>
<pre><code>## # A tibble: 4 x 7
##   term  estimate std.error statistic p.value model   by_2sd
##   &lt;chr&gt;    &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;   &lt;lgl&gt; 
## 1 cyl     -6.37       2.19    -2.91  0.00722 Model 1 TRUE  
## 2 disp     1.72       2.98     0.578 0.568   Model 1 TRUE  
## 3 gear    -0.724      1.17    -0.621 0.540   Model 1 TRUE  
## 4 wt      -7.42       2.12    -3.51  0.00161 Model 1 TRUE</code></pre>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/dwplot.html">dwplot</a></span><span class="op">(</span><span class="va">m1_df_mod</span><span class="op">)</span></code></pre></div>
<p><img src="dotwhisker-vignette_files/figure-html/by2sd-1.png" width="660"></p>
<p>An input data frame can also be constructed from estimates of other quantities of interest, such as margins, odds ratios, or predicted probabilities, rather than coefficients.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Create a data.frame of marginal effects</span>
<span class="va">m5</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/glm.html">glm</a></span><span class="op">(</span><span class="va">am</span> <span class="op">~</span> <span class="va">wt</span> <span class="op">+</span> <span class="va">cyl</span> <span class="op">+</span> <span class="va">mpg</span>, data <span class="op">=</span> <span class="va">mtcars</span>, family <span class="op">=</span> <span class="va">binomial</span><span class="op">)</span>
<span class="va">m5_margin</span> <span class="op">&lt;-</span> <span class="fu">margins</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/margins/man/margins.html">margins</a></span><span class="op">(</span><span class="va">m5</span><span class="op">)</span> <span class="op">%&gt;%</span>
    <span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span>
    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename</a></span><span class="op">(</span>
        term <span class="op">=</span> <span class="va">factor</span>,
        estimate <span class="op">=</span> <span class="va">AME</span>,
        std.error <span class="op">=</span> <span class="va">SE</span>,
        conf.low <span class="op">=</span> <span class="va">lower</span>,
        conf.high <span class="op">=</span> <span class="va">upper</span>,
        statistic <span class="op">=</span> <span class="va">z</span>,
        p.value <span class="op">=</span> <span class="va">p</span>
    <span class="op">)</span>
<span class="va">m5_margin</span></code></pre></div>
<pre><code>##  term  estimate std.error statistic   p.value conf.low conf.high
##   cyl  0.084403   0.05464    1.5447 1.224e-01 -0.02269   0.19150
##   mpg -0.005115   0.02485   -0.2058 8.369e-01 -0.05382   0.04359
##    wt -0.550800   0.12266   -4.4905 7.107e-06 -0.79121  -0.31039</code></pre>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/dwplot.html">dwplot</a></span><span class="op">(</span><span class="va">m5_margin</span><span class="op">)</span></code></pre></div>
<p><img src="dotwhisker-vignette_files/figure-html/margins-1.png" width="660"></p>
<p>Since the marginal effects are widely used in nowadays social science, <code>dwplot</code> offers a convenient shortcut <code>margins</code>. Users can plot the average marginal effects (AME) instead of regression coefficients by setting <code>margins</code> to TRUE. The confidence intervals of the AME can be set by the argument <code>ci</code>.</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/dwplot.html">dwplot</a></span><span class="op">(</span><span class="va">m5</span>, margins <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p><img src="dotwhisker-vignette_files/figure-html/marginsShort-1.png" width="660"></p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/dwplot.html">dwplot</a></span><span class="op">(</span><span class="va">m5</span>, margins <span class="op">=</span> <span class="cn">TRUE</span>, ci <span class="op">=</span> <span class="fl">.8</span><span class="op">)</span></code></pre></div>
<p><img src="dotwhisker-vignette_files/figure-html/marginsShort-2.png" width="660"></p>
</div>
<div id="grouping-predictors" class="section level2">
<h2 class="hasAnchor">
<a href="#grouping-predictors" class="anchor"></a>Grouping Predictors</h2>
<p>It is frequently desirable to convey that the predictors in a model depicted in a dot-and-whisker plot form groups of some sort. This can be achieved by passing the finalized plot to the <code>add_brackets</code> function. To pass the finalized plot to <code>add_brackets</code> without creating an intermediate object, simply wrap the code that generates it in braces (<code>{</code> and <code>}</code>):</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Create list of brackets (label, topmost included predictor, bottommost included predictor)</span>
<span class="va">three_brackets</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>
    <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Overall"</span>, <span class="st">"Weight"</span>, <span class="st">"Weight"</span><span class="op">)</span>,
    <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Engine"</span>, <span class="st">"Cylinders"</span>, <span class="st">"Horsepower"</span><span class="op">)</span>,
    <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Transmission"</span>, <span class="st">"Gears"</span>, <span class="st">"Manual"</span><span class="op">)</span>
<span class="op">)</span>

<span class="op">{</span>
    <span class="fu"><a href="../reference/dwplot.html">dwplot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="va">m1</span>, <span class="va">m2</span>, <span class="va">m3</span><span class="op">)</span>,
           vline <span class="op">=</span> <span class="fu">geom_vline</span><span class="op">(</span>
               xintercept <span class="op">=</span> <span class="fl">0</span>,
               colour <span class="op">=</span> <span class="st">"grey60"</span>,
               linetype <span class="op">=</span> <span class="fl">2</span>
           <span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="co"># plot line at zero _behind_ coefs</span>
        <span class="fu"><a href="../reference/relabel_predictors.html">relabel_predictors</a></span><span class="op">(</span>
            <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span>
                wt <span class="op">=</span> <span class="st">"Weight"</span>,
                <span class="co"># relabel predictors</span>
                cyl <span class="op">=</span> <span class="st">"Cylinders"</span>,
                disp <span class="op">=</span> <span class="st">"Displacement"</span>,
                hp <span class="op">=</span> <span class="st">"Horsepower"</span>,
                gear <span class="op">=</span> <span class="st">"Gears"</span>,
                am <span class="op">=</span> <span class="st">"Manual"</span>
            <span class="op">)</span>
        <span class="op">)</span> <span class="op">+</span> <span class="fu">xlab</span><span class="op">(</span><span class="st">"Coefficient Estimate"</span><span class="op">)</span> <span class="op">+</span> <span class="fu">ylab</span><span class="op">(</span><span class="st">""</span><span class="op">)</span> <span class="op">+</span>
        <span class="fu">ggtitle</span><span class="op">(</span><span class="st">"Predicting Gas Mileage"</span><span class="op">)</span> <span class="op">+</span>
        <span class="fu">theme</span><span class="op">(</span>
            plot.title <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>face <span class="op">=</span> <span class="st">"bold"</span><span class="op">)</span>,
            legend.position <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.993</span>, <span class="fl">0.99</span><span class="op">)</span>,
            legend.justification <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>,
            legend.background <span class="op">=</span> <span class="fu">element_rect</span><span class="op">(</span>colour <span class="op">=</span> <span class="st">"grey80"</span><span class="op">)</span>,
            legend.title <span class="op">=</span> <span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span>
        <span class="op">)</span>
<span class="op">}</span> <span class="op">%&gt;%</span>
    <span class="fu"><a href="../reference/add_brackets.html">add_brackets</a></span><span class="op">(</span><span class="va">three_brackets</span>, fontSize <span class="op">=</span> <span class="fl">0.3</span><span class="op">)</span></code></pre></div>
<p><img src="dotwhisker-vignette_files/figure-html/brackets-1.png" width="1500"></p>
</div>
<div id="presenting-regression-results-as-normal-distributions" class="section level2">
<h2 class="hasAnchor">
<a href="#presenting-regression-results-as-normal-distributions" class="anchor"></a>Presenting Regression Results as Normal Distributions</h2>
<p><a href="https://twitter.com/BenJamesEdwards/status/979751070254747650">Inspired by</a> the way <span class="citation">Edwards, Jacobs, and Forrest (2016, 5)</span> displayed regression coefficients as normal distributions, <code>dotwhisker</code> now provides an easy way to make similar plots. To create such plots, call <code>dwplot</code> as always but include the argument <code>style = "distribution"</code>, then customize with other <code>dotwhisker</code> functions and <code>ggplot</code> additions as usual:</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">by_transmission_brackets</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>
    <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Overall"</span>, <span class="st">"Weight"</span>, <span class="st">"Weight"</span><span class="op">)</span>,
    <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Engine"</span>, <span class="st">"Cylinders"</span>, <span class="st">"Horsepower"</span><span class="op">)</span>,
    <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Transmission"</span>, <span class="st">"Gears"</span>, <span class="st">"1/4 Mile/t"</span><span class="op">)</span>
<span class="op">)</span>

<span class="op">{</span>
    <span class="va">mtcars</span> <span class="op">%&gt;%</span>
        <span class="fu"><a href="https://rdrr.io/r/base/split.html">split</a></span><span class="op">(</span><span class="va">.</span><span class="op">$</span><span class="va">am</span><span class="op">)</span> <span class="op">%&gt;%</span>
        <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html">map</a></span><span class="op">(</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="va">mpg</span> <span class="op">~</span> <span class="va">wt</span> <span class="op">+</span> <span class="va">cyl</span> <span class="op">+</span> <span class="va">gear</span> <span class="op">+</span> <span class="va">qsec</span>, data <span class="op">=</span> <span class="va">.x</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
        <span class="fu"><a href="../reference/dwplot.html">dwplot</a></span><span class="op">(</span>style <span class="op">=</span> <span class="st">"distribution"</span><span class="op">)</span> <span class="op">%&gt;%</span>
        <span class="fu"><a href="../reference/relabel_predictors.html">relabel_predictors</a></span><span class="op">(</span>
            wt <span class="op">=</span> <span class="st">"Weight"</span>,
            cyl <span class="op">=</span> <span class="st">"Cylinders"</span>,
            disp <span class="op">=</span> <span class="st">"Displacement"</span>,
            hp <span class="op">=</span> <span class="st">"Horsepower"</span>,
            gear <span class="op">=</span> <span class="st">"Gears"</span>,
            qsec <span class="op">=</span> <span class="st">"1/4 Mile/t"</span>
        <span class="op">)</span> <span class="op">+</span>
        <span class="fu">theme_bw</span><span class="op">(</span>base_size <span class="op">=</span> <span class="fl">4</span><span class="op">)</span> <span class="op">+</span> <span class="fu">xlab</span><span class="op">(</span><span class="st">"Coefficient"</span><span class="op">)</span> <span class="op">+</span> <span class="fu">ylab</span><span class="op">(</span><span class="st">""</span><span class="op">)</span> <span class="op">+</span>
        <span class="fu">geom_vline</span><span class="op">(</span>xintercept <span class="op">=</span> <span class="fl">0</span>,
                   colour <span class="op">=</span> <span class="st">"grey60"</span>,
                   linetype <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">+</span>
        <span class="fu">theme</span><span class="op">(</span>
            legend.position <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">.995</span>, <span class="fl">.99</span><span class="op">)</span>,
            legend.justification <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>,
            legend.background <span class="op">=</span> <span class="fu">element_rect</span><span class="op">(</span>colour <span class="op">=</span> <span class="st">"grey80"</span><span class="op">)</span>,
            legend.title.align <span class="op">=</span> <span class="fl">.5</span>
        <span class="op">)</span> <span class="op">+</span>
        <span class="fu">scale_colour_grey</span><span class="op">(</span>
            start <span class="op">=</span> <span class="fl">.8</span>,
            end <span class="op">=</span> <span class="fl">.4</span>,
            name <span class="op">=</span> <span class="st">"Transmission"</span>,
            breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Model 0"</span>, <span class="st">"Model 1"</span><span class="op">)</span>,
            labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Automatic"</span>, <span class="st">"Manual"</span><span class="op">)</span>
        <span class="op">)</span> <span class="op">+</span>
        <span class="fu">scale_fill_grey</span><span class="op">(</span>
            start <span class="op">=</span> <span class="fl">.8</span>,
            end <span class="op">=</span> <span class="fl">.4</span>,
            name <span class="op">=</span> <span class="st">"Transmission"</span>,
            breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Model 0"</span>, <span class="st">"Model 1"</span><span class="op">)</span>,
            labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Automatic"</span>, <span class="st">"Manual"</span><span class="op">)</span>
        <span class="op">)</span> <span class="op">+</span>
        <span class="fu">ggtitle</span><span class="op">(</span><span class="st">"Predicting Gas Mileage by Transmission Type"</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">theme</span><span class="op">(</span>plot.title <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>face <span class="op">=</span> <span class="st">"bold"</span>, hjust <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span>
<span class="op">}</span> <span class="op">%&gt;%</span>
    <span class="fu"><a href="../reference/add_brackets.html">add_brackets</a></span><span class="op">(</span><span class="va">by_transmission_brackets</span>, fontSize <span class="op">=</span> <span class="fl">0.3</span><span class="op">)</span></code></pre></div>
<p><img src="dotwhisker-vignette_files/figure-html/distribution-1.png" width="1500"></p>
</div>
<div id="the-secret-weapon-and-small-multiple-plots" class="section level2">
<h2 class="hasAnchor">
<a href="#the-secret-weapon-and-small-multiple-plots" class="anchor"></a>The ‘Secret Weapon’ and ‘Small Multiple’ Plots</h2>
<p>A variation of dot-and-whisker plot is used to compare the estimated coefficients for a single predictor across many models or datasets: Andrew Gelman calls such plots <a href="https://statmodeling.stat.columbia.edu/2005/03/07/the_secret_weap/">the ‘secret weapon’</a>. They are easy to make with the <code>secret_weapon</code> function. Like <code>dwplot</code>, the function accepts both lists of model objects and tidy data frames as input. The <code>var</code> argument is used to specify the predictor for which results are to be plotted.</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="va">diamonds</span><span class="op">)</span>

<span class="co"># Estimate models for many subsets of data, put results in a tidy data.frame</span>
<span class="va">by_clarity</span> <span class="op">&lt;-</span> <span class="va">diamonds</span> <span class="op">%&gt;%</span>
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">clarity</span><span class="op">)</span> <span class="op">%&gt;%</span>
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/do.html">do</a></span><span class="op">(</span><span class="fu">broom</span><span class="fu">::</span><span class="fu"><a href="https://generics.r-lib.org/reference/tidy.html">tidy</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="va">price</span> <span class="op">~</span> <span class="va">carat</span> <span class="op">+</span> <span class="va">cut</span> <span class="op">+</span> <span class="va">color</span>, data <span class="op">=</span> <span class="va">.</span><span class="op">)</span>, conf.int <span class="op">=</span> <span class="fl">.99</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
    <span class="va">ungroup</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename</a></span><span class="op">(</span>model <span class="op">=</span> <span class="va">clarity</span><span class="op">)</span>

<span class="co"># Deploy the secret weapon</span>
<span class="fu"><a href="../reference/secret_weapon.html">secret_weapon</a></span><span class="op">(</span><span class="va">by_clarity</span>, var <span class="op">=</span> <span class="st">"carat"</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">xlab</span><span class="op">(</span><span class="st">"Estimated Coefficient (Dollars)"</span><span class="op">)</span> <span class="op">+</span> <span class="fu">ylab</span><span class="op">(</span><span class="st">"Diamond Clarity"</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">ggtitle</span><span class="op">(</span><span class="st">"Estimates for Diamond Size Across Clarity Grades"</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">theme</span><span class="op">(</span>plot.title <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>face <span class="op">=</span> <span class="st">"bold"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><img src="dotwhisker-vignette_files/figure-html/secretWeapon-1.png" width="660"></p>
<p>A final means of presenting many models’ results at once in a particularly compact format is the “small multiple” plot of regression results <span class="citation">(see Kastellec and Leoni 2007, 766)</span>. Small-multiple plots present estimates in multiple panels, one for each variable: they are similar to a stack of secret weapon plots. The <code>small_multiple</code> function makes generating these plots simple. Here, we pass a tidy data frame of six models to the function so we can to rescale the coefficients first, but the function can accept a list of model objects as well.</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Generate a tidy data frame of regression results from six models</span>
<span class="va">m</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="op">)</span>
<span class="va">ordered_vars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"wt"</span>, <span class="st">"cyl"</span>, <span class="st">"disp"</span>, <span class="st">"hp"</span>, <span class="st">"gear"</span>, <span class="st">"am"</span><span class="op">)</span>
<span class="va">m</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="va">mpg</span> <span class="op">~</span> <span class="va">wt</span>, data <span class="op">=</span> <span class="va">mtcars</span><span class="op">)</span>
<span class="va">m123456_df</span> <span class="op">&lt;-</span> <span class="va">m</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span> <span class="op">%&gt;%</span>
    <span class="fu">broom</span><span class="fu">::</span><span class="fu"><a href="https://generics.r-lib.org/reference/tidy.html">tidy</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span>
    <span class="fu"><a href="../reference/by_2sd.html">by_2sd</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">)</span> <span class="op">%&gt;%</span>
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>model <span class="op">=</span> <span class="st">"Model 1"</span><span class="op">)</span>
<span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">2</span><span class="op">:</span><span class="fl">6</span><span class="op">)</span> <span class="op">{</span>
    <span class="va">m</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/update.html">update</a></span><span class="op">(</span><span class="va">m</span><span class="op">[[</span><span class="va">i</span> <span class="op">-</span> <span class="fl">1</span><span class="op">]</span><span class="op">]</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="st">". ~ . +"</span>, <span class="va">ordered_vars</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>
    <span class="va">m123456_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span><span class="op">(</span><span class="va">m123456_df</span>,
                        <span class="va">m</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span> <span class="op">%&gt;%</span>
                            <span class="fu">broom</span><span class="fu">::</span><span class="fu"><a href="https://generics.r-lib.org/reference/tidy.html">tidy</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span>
                            <span class="fu"><a href="../reference/by_2sd.html">by_2sd</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">)</span> <span class="op">%&gt;%</span>
                            <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>model <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="st">"Model"</span>, <span class="va">i</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="op">}</span>

<span class="co"># Relabel predictors (they will appear as facet labels)</span>
<span class="va">m123456_df</span> <span class="op">&lt;-</span> <span class="va">m123456_df</span> <span class="op">%&gt;%</span>
    <span class="fu"><a href="../reference/relabel_predictors.html">relabel_predictors</a></span><span class="op">(</span>
        <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span>
            <span class="st">"(Intercept)"</span> <span class="op">=</span> <span class="st">"Intercept"</span>,
            wt <span class="op">=</span> <span class="st">"Weight"</span>,
            cyl <span class="op">=</span> <span class="st">"Cylinders"</span>,
            disp <span class="op">=</span> <span class="st">"Displacement"</span>,
            hp <span class="op">=</span> <span class="st">"Horsepower"</span>,
            gear <span class="op">=</span> <span class="st">"Gears"</span>,
            am <span class="op">=</span> <span class="st">"Manual"</span>
        <span class="op">)</span>
    <span class="op">)</span>

<span class="co"># Generate a 'small multiple' plot</span>
<span class="fu"><a href="../reference/small_multiple.html">small_multiple</a></span><span class="op">(</span><span class="va">m123456_df</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">theme_bw</span><span class="op">(</span>base_size <span class="op">=</span> <span class="fl">4</span><span class="op">)</span> <span class="op">+</span> <span class="fu">ylab</span><span class="op">(</span><span class="st">"Coefficient Estimate"</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">geom_hline</span><span class="op">(</span>yintercept <span class="op">=</span> <span class="fl">0</span>,
               colour <span class="op">=</span> <span class="st">"grey60"</span>,
               linetype <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">ggtitle</span><span class="op">(</span><span class="st">"Predicting Mileage"</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">theme</span><span class="op">(</span>
        plot.title <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>face <span class="op">=</span> <span class="st">"bold"</span><span class="op">)</span>,
        legend.position <span class="op">=</span> <span class="st">"none"</span>,
        axis.text.x <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>angle <span class="op">=</span> <span class="fl">60</span>, hjust <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>
    <span class="op">)</span> </code></pre></div>
<p><img src="dotwhisker-vignette_files/figure-html/smallMultiple-1.png" width="660"></p>
<p>To facilitate comparisons across, e.g., results generated across different samples, one can cluster the results presented in a small multiple plot. To do so, results that should be clustered should have the same value of <code>model</code>, but should be assigned different values of an additional <code>submodel</code> variable included in the tidy data frame passed to <code>small_multiple</code>. (We also replicate three examples in <span class="citation">Kastellec and Leoni (2007)</span> with <code>dotwhisker</code> in a separate vignette, “kl2007_examples”.)</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Generate a tidy data frame of regression results from five models on</span>
<span class="co"># the mtcars data subset by transmission type</span>
<span class="va">ordered_vars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"wt"</span>, <span class="st">"cyl"</span>, <span class="st">"disp"</span>, <span class="st">"hp"</span>, <span class="st">"gear"</span><span class="op">)</span>
<span class="va">mod</span> <span class="op">&lt;-</span> <span class="st">"mpg ~ wt"</span>

<span class="va">by_trans2</span> <span class="op">&lt;-</span> <span class="va">mtcars</span> <span class="op">%&gt;%</span>
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">am</span><span class="op">)</span> <span class="op">%&gt;%</span>                        <span class="co"># group data by transmission</span>
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/do.html">do</a></span><span class="op">(</span><span class="fu">broom</span><span class="fu">::</span><span class="fu"><a href="https://generics.r-lib.org/reference/tidy.html">tidy</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="va">mod</span>, data <span class="op">=</span> <span class="va">.</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>         <span class="co"># run model on each group</span>
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename</a></span><span class="op">(</span>submodel <span class="op">=</span> <span class="va">am</span><span class="op">)</span> <span class="op">%&gt;%</span>               <span class="co"># make submodel variable</span>
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>model <span class="op">=</span> <span class="st">"Model 1"</span><span class="op">)</span> <span class="op">%&gt;%</span>           <span class="co"># make model variable</span>
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">ungroup</a></span><span class="op">(</span><span class="op">)</span>

<span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">2</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span> <span class="op">{</span>
    <span class="va">mod</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="va">mod</span>, <span class="st">"+"</span>, <span class="va">ordered_vars</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span>
    <span class="va">by_trans2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span><span class="op">(</span>
        <span class="va">by_trans2</span>,
        <span class="va">mtcars</span> <span class="op">%&gt;%</span>
            <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">am</span><span class="op">)</span> <span class="op">%&gt;%</span>
            <span class="fu"><a href="https://dplyr.tidyverse.org/reference/do.html">do</a></span><span class="op">(</span><span class="fu">broom</span><span class="fu">::</span><span class="fu"><a href="https://generics.r-lib.org/reference/tidy.html">tidy</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="va">mod</span>, data <span class="op">=</span> <span class="va">.</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
            <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename</a></span><span class="op">(</span>submodel <span class="op">=</span> <span class="va">am</span><span class="op">)</span> <span class="op">%&gt;%</span>
            <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>model <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="st">"Model"</span>, <span class="va">i</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
            <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">ungroup</a></span><span class="op">(</span><span class="op">)</span>
    <span class="op">)</span>
<span class="op">}</span>

<span class="co"># Relabel predictors (they will appear as facet labels)</span>
<span class="va">by_trans2</span> <span class="op">&lt;-</span> <span class="va">by_trans2</span> <span class="op">%&gt;%</span>
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">submodel</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/everything.html">everything</a></span><span class="op">(</span><span class="op">)</span>, <span class="va">submodel</span><span class="op">)</span> <span class="op">%&gt;%</span>
    <span class="fu"><a href="../reference/relabel_predictors.html">relabel_predictors</a></span><span class="op">(</span>
        <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span>
            <span class="st">"(Intercept)"</span> <span class="op">=</span> <span class="st">"Intercept"</span>,
            wt <span class="op">=</span> <span class="st">"Weight"</span>,
            cyl <span class="op">=</span> <span class="st">"Cylinders"</span>,
            disp <span class="op">=</span> <span class="st">"Displacement"</span>,
            hp <span class="op">=</span> <span class="st">"Horsepower"</span>,
            gear <span class="op">=</span> <span class="st">"Gears"</span>
        <span class="op">)</span>
    <span class="op">)</span>

<span class="va">by_trans2</span></code></pre></div>
<pre><code>## # A tibble: 40 x 7
##    term      estimate std.error statistic  p.value model   submodel
##    &lt;fct&gt;        &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;      &lt;dbl&gt;
##  1 Intercept   31.4       2.95     10.7   6.01e- 9 Model 1        0
##  2 Intercept   46.3       3.12     14.8   1.28e- 8 Model 1        1
##  3 Weight      -3.79      0.767    -4.94  1.25e- 4 Model 1        0
##  4 Weight      -9.08      1.26     -7.23  1.69e- 5 Model 1        1
##  5 Intercept   34.6       2.48     13.9   2.31e-10 Model 2        0
##  6 Intercept   46.2       3.17     14.6   4.51e- 8 Model 2        1
##  7 Weight      -2.23      0.752    -2.96  9.19e- 3 Model 2        0
##  8 Weight      -7.40      2.40     -3.09  1.15e- 2 Model 2        1
##  9 Cylinders   -1.30      0.379    -3.43  3.43e- 3 Model 2        0
## 10 Cylinders   -0.789     0.953    -0.828 4.27e- 1 Model 2        1
## # ... with 30 more rows</code></pre>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/small_multiple.html">small_multiple</a></span><span class="op">(</span><span class="va">by_trans2</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">theme_bw</span><span class="op">(</span>base_size <span class="op">=</span> <span class="fl">4</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">ylab</span><span class="op">(</span><span class="st">"Coefficient Estimate"</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">geom_hline</span><span class="op">(</span>yintercept <span class="op">=</span> <span class="fl">0</span>,
               colour <span class="op">=</span> <span class="st">"grey60"</span>,
               linetype <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">theme</span><span class="op">(</span>
        axis.text.x  <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>angle <span class="op">=</span> <span class="fl">45</span>, hjust <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,
        legend.position <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.02</span>, <span class="fl">0.008</span><span class="op">)</span>,
        legend.justification <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>,
        legend.title <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>size <span class="op">=</span> <span class="fl">8</span><span class="op">)</span>,
        legend.background <span class="op">=</span> <span class="fu">element_rect</span><span class="op">(</span>color <span class="op">=</span> <span class="st">"gray90"</span><span class="op">)</span>,
        legend.spacing <span class="op">=</span> <span class="fu">unit</span><span class="op">(</span><span class="op">-</span><span class="fl">4</span>, <span class="st">"pt"</span><span class="op">)</span>,
        legend.key.size <span class="op">=</span> <span class="fu">unit</span><span class="op">(</span><span class="fl">10</span>, <span class="st">"pt"</span><span class="op">)</span>
    <span class="op">)</span> <span class="op">+</span>
    <span class="fu">scale_colour_hue</span><span class="op">(</span>
        name <span class="op">=</span> <span class="st">"Transmission"</span>,
        breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span>,
        labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Automatic"</span>, <span class="st">"Manual"</span><span class="op">)</span>
    <span class="op">)</span> <span class="op">+</span>
    <span class="fu">ggtitle</span><span class="op">(</span><span class="st">"Predicting Gas Mileage\nby Transmission Type"</span><span class="op">)</span></code></pre></div>
<p><img src="dotwhisker-vignette_files/figure-html/smallMultiple2-1.png" width="660"></p>
</div>
<div id="conclusion" class="section level2">
<h2 class="hasAnchor">
<a href="#conclusion" class="anchor"></a>Conclusion</h2>
<p>The <code>dotwhisker</code> package provides a flexible and convenient way to visualize regression results and to compare them across models. This vignette offers an overview of its use and features. We encourage users to consult the help files for more details.</p>
<p>The development of the package is ongoing. Please contact us with any questions, bug reports, and comments.</p>
</div>
<div id="affiliation" class="section level2">
<h2 class="hasAnchor">
<a href="#affiliation" class="anchor"></a>Affiliation</h2>
<p>Frederick Solt</p>
<p>Department of Political Science,</p>
<p>University of Iowa,</p>
<p>324 Schaeffer Hall,</p>
<p>20 E Washington St, Iowa City, IA, 52242</p>
<p>Email: <a href="mailto:frederick-solt@uiowa.edu" class="email">frederick-solt@uiowa.edu</a></p>
<p>Website: <a href="https://fsolt.org" class="uri">https://fsolt.org</a></p>
<p><br></p>
<p>Yue Hu</p>
<p>Department of Political Science,</p>
<p>Tsinghua University,</p>
<p>Mingzhai 414,</p>
<p>Zhongguancun Avenue, Haidian, Beijing 100084</p>
<p>Email: <a href="mailto:yuehu@tsinghua.edu.cn" class="email">yuehu@tsinghua.edu.cn</a></p>
<p>Website: <a href="https://sammo3182.github.io" class="uri">https://sammo3182.github.io</a></p>
</div>
<div id="references" class="section level2 unnumbered">
<h2 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h2>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-Edwards2016" class="csl-entry">
Edwards, Benjamin, Jay Jacobs, and Stephanie Forrest. 2016. <span>“Risky Business: Assessing Security with External Measurements.”</span>
</div>
<div id="ref-Gelman2008" class="csl-entry">
Gelman, Andrew. 2008. <span>“Scaling Regression Inputs by Dividing by Two Standard Deviations.”</span> <em>Statistics in Medicine</em> 27 (15): 2865–73.
</div>
<div id="ref-Gelman2002" class="csl-entry">
Gelman, Andrew, Cristian Pasarica, and Rahul Dodhia. 2002. <span>“Let’s Practice What We Preach: Turning Tables into Graphs.”</span> <em>American Statistician</em> 56 (2): 121–30.
</div>
<div id="ref-Kastellec2007" class="csl-entry">
Kastellec, Jonathan P., and Eduardo L. Leoni. 2007. <span>“Using Graphs Instead of Tables in Political Science.”</span> <em>Perspectives on Politics</em> 5 (4): 755–71.
</div>
<div id="ref-Robinson2015" class="csl-entry">
Robinson, David. 2015. <em><span class="nocase">broom</span>: Convert Statistical Analysis Objects into Tidy Data Frames</em>. <a href="https://CRAN.R-project.org/package=broom">https://CRAN.R-project.org/package=broom</a>.
</div>
<div id="ref-Wickham2009" class="csl-entry">
Wickham, Hadley. 2009. <em><span class="nocase">ggplot2</span>: Elegant Graphics for Data Analysis</em>. New York: Springer. <a href="https://ggplot2-book.org/">https://ggplot2-book.org/</a>.
</div>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Frederick Solt, Yue Hu.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.9000.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
